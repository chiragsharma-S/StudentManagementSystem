{% extends "base.html" %}
{% block content %}

<div class="row g-4 align-items-stretch mb-4">

  <!-- Hero card with classroom image -->
  <div class="col-lg-8">
    <div class="card card-soft overflow-hidden" style="min-height: 220px;">
      <div class="row g-0 h-100">
        <div class="col-md-7 p-4 d-flex flex-column justify-content-center">
          <h1 class="page-title mb-2">Dashboard</h1>
          <p class="text-muted mb-3">
            Track students, mark attendance, and monitor performance for your department.
          </p>
          <div class="d-flex flex-wrap gap-2">
            <a href="{{ url_for('students') }}" class="btn btn-dark btn-rounded px-4">Manage Students</a>
            <a href="{{ url_for('attendance') }}" class="btn btn-outline-dark btn-rounded px-4">Mark Attendance</a>
          </div>
        </div>
        <div class="col-md-5 d-none d-md-block">
          <div style="
              background-image: url('https://images.pexels.com/photos/3184325/pexels-photo-3184325.jpeg?auto=compress&cs=tinysrgb&w=1200');
              background-size: cover;
              background-position: center;
              height: 100%;
            ">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Today's attendance status card -->
  <div class="col-lg-4">
    <div class="card card-soft h-100">
      <div class="card-body d-flex flex-column justify-content-center text-center">
        <p class="text-muted mb-1">Today’s attendance</p>
        {% if today_marked %}
          <span class="badge bg-success badge-soft mb-2">Completed</span>
          <h4 class="fw-semibold mb-1">Class Attendance: {{ class_attendance_percent }}%</h4>
          <p class="text-muted mb-0">You have already marked attendance for today.</p>
        {% else %}
          <span class="badge bg-danger badge-soft mb-2">Pending</span>
          <h4 class="fw-semibold mb-1">Not marked yet</h4>
          <p class="text-muted mb-2">Mark attendance to see today’s class percentage.</p>
          <a href="{{ url_for('attendance') }}" class="btn btn-sm btn-primary btn-rounded px-3">
            Mark now
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Stats row -->
<div class="row g-4">

  <!-- Total students -->
  <div class="col-md-4">
    <div class="card card-soft text-center">
      <div class="card-body">
        <p class="text-muted mb-1">Total Students (Your Department)</p>
        <h2 class="fw-bold mb-0">{{ total_students }}</h2>
      </div>
    </div>
  </div>

  <!-- Total attendance records -->
  <div class="col-md-4">
    <div class="card card-soft text-center">
      <div class="card-body">
        <p class="text-muted mb-1">Attendance Records Stored</p>
        <h2 class="fw-bold mb-0">{{ total_attendance_records }}</h2>
      </div>
    </div>
  </div>

  <!-- Quick links -->
  <div class="col-md-4">
    <div class="card card-soft">
      <div class="card-body text-center">
        <p class="text-muted mb-2">Quick navigation</p>
        <div class="d-grid gap-2">
          <a href="{{ url_for('attendance_by_date') }}" class="btn btn-outline-secondary btn-rounded">View by Date</a>
          <a href="{{ url_for('attendance_summary') }}" class="btn btn-outline-secondary btn-rounded">Attendance Summary</a>
        </div>
      </div>
    </div>
  </div>

</div>

{% endblock %}
